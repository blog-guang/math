# Math Library Roadmap

快速参考版本，详细规划见 [DEVELOPMENT_PLAN.md](DEVELOPMENT_PLAN.md)

---

## 当前状态：v1.0 ✓

**已完成**：
- ✅ 3 个 Krylov 求解器：CG, GMRES, BiCGSTAB
- ✅ 4 个预条件器：Jacobi, ILU0, AMG, AMGCL
- ✅ 重排序算法：RCM, diagonal permutation
- ✅ Matrix Market I/O
- ✅ 12 个测试矩阵验证
- ✅ 13 个单元测试套件

**性能亮点**：
- bcsstk13 (2003×2003 SPD): CG+AMGCL 1 iter, 6ms
- sherman1 (1000×1000): GMRES+AMGCL 1 iter, 1.2ms
- lns 系列: RCM 带宽缩减 2.6x~19.5x

---

## Phase 1: 求解器族扩展 (Week 1-2)

### 目标
补齐常用 Krylov 方法，建立全面性能基准。

### 任务
#### QMR 求解器 (3d)
- [ ] 1.1 实现 QMR 算法核心 (1d)
- [ ] 1.2 实现不完全 LU 分解预条件 QMR (1d)
- [ ] 1.3 添加 QMR 单元测试 (0.5d)
- [ ] 1.4 QMR 性能基准测试 (0.5d)

#### TFQMR 求解器 (3d)
- [ ] 2.1 实现 TFQMR 算法核心 (1d)
- [ ] 2.2 实现预条件 TFQMR (1d)
- [ ] 2.3 TFQMR 单元测试 (0.5d)
- [ ] 2.4 TFQMR 性能基准测试 (0.5d)

#### CGS 求解器 (2d)
- [ ] 3.1 实现 CGS 算法核心 (1d)
- [ ] 3.2 实现预条件 CGS (0.5d)
- [ ] 3.3 CGS 单元测试 (0.5d)

#### IDR(s) 求解器 (4d)
- [ ] 4.1 实现 IDR(s) 算法核心 (2d)
- [ ] 4.2 实现预条件 IDR(s) (1d)
- [ ] 4.3 IDR(s) 单元测试 (1d)

#### Chebyshev 迭代 (2d)
- [ ] 5.1 实现 Chebyshev 迭代算法 (1d)
- [ ] 5.2 集成到求解器框架 (0.5d)
- [ ] 5.3 Chebyshev 单元测试 (0.5d)

#### 扩展 benchmark 到 50+ 矩阵 (2d)
- [ ] 6.1 获取额外 38 个测试矩阵 (1d)
- [ ] 6.2 为新增矩阵编写加载脚本 (0.5d)
- [ ] 6.3 更新基准测试框架 (0.5d)

#### 性能回归测试 (2d)
- [ ] 7.1 建立性能基线数据 (1d)
- [ ] 7.2 创建自动化回归测试脚本 (1d)

### 交付
- 8 个求解器全覆盖
- 50+ 矩阵性能数据库
- 自动化回归测试脚本

---

## Phase 2: 预条件器 + 并行 (Week 3-5)

### 目标
病态矩阵求解能力提升，多核并行加速。

### 任务
#### ILUT (threshold ILU) (4d)
- [ ] 8.1 实现 ILUT 算法核心 (2d)
- [ ] 8.2 优化 ILUT 数值稳定性 (1d)
- [ ] 8.3 ILUT 单元测试与集成测试 (1d)

#### SSOR 预条件器 (2d)
- [ ] 9.1 实现 SSOR 算法核心 (1d)
- [ ] 9.2 SSOR 单元测试 (1d)

#### Polynomial 预条件 (3d)
- [ ] 10.1 实现多项式预条件算法 (1.5d)
- [ ] 10.2 优化多项式系数计算 (1d)
- [ ] 10.3 Polynomial 预条件器测试 (0.5d)

#### Block Jacobi (3d)
- [ ] 11.1 实现 Block Jacobi 算法 (1.5d)
- [ ] 11.2 优化块大小选择策略 (1d)
- [ ] 11.3 Block Jacobi 测试 (0.5d)

#### 集成 METIS/AMD 重排序 (3d)
- [ ] 12.1 集成 METIS 库 (1.5d)
- [ ] 12.2 集成 AMD 库 (1d)
- [ ] 12.3 重排序算法比较与基准测试 (0.5d)

#### OpenMP 并行 SpMV (3d)
- [ ] 13.1 实现 CSR 格式并行 SpMV (1d)
- [ ] 13.2 实现 CSC 格式并行 SpMV (1d)
- [ ] 13.3 并行 SpMV 性能优化 (1d)

#### OpenMP 并行预条件器 (4d)
- [ ] 14.1 并行化 ILU0 预条件器 (1.5d)
- [ ] 14.2 并行化 Jacobi 预条件器 (0.5d)
- [ ] 14.3 并行化其他预条件器 (1.5d)
- [ ] 14.4 并行预条件器基准测试 (0.5d)

#### 内存池优化 (2d)
- [ ] 15.1 设计内存池接口 (0.5d)
- [ ] 15.2 实现向量内存池 (1d)
- [ ] 15.3 集成内存池到求解器 (0.5d)

### 交付
- 4 个新预条件器
- METIS/AMD 集成
- OpenMP 并行版本（8 核加速 > 4x）

---

## Phase 3: 自适应 + Python (Week 6-7)

### 目标
自动算法选择，Python 生态集成。

### 任务
#### 矩阵特征探测（SPD/对称/带宽/条件数） (3d)
- [ ] 16.1 实现 SPD 检测算法 (0.5d)
- [ ] 16.2 实现对称性检测 (0.5d)
- [ ] 16.3 实现带宽估算 (0.5d)
- [ ] 16.4 实现条件数估算 (1d)
- [ ] 16.5 集成所有特征探测功能 (0.5d)

#### 求解器/预条件器匹配规则库 (4d)
- [ ] 17.1 定义规则引擎架构 (1d)
- [ ] 17.2 实现基于矩阵特征的选择逻辑 (1.5d)
- [ ] 17.3 创建规则配置文件 (1d)
- [ ] 17.4 规则库测试与验证 (0.5d)

#### 自适应参数调整 (3d)
- [ ] 18.1 实现动态容差调整 (1d)
- [ ] 18.2 实现迭代次数自适应 (1d)
- [ ] 18.3 参数调整策略验证 (1d)

#### 收敛失败时策略切换 (3d)
- [ ] 19.1 实现收敛监控机制 (1d)
- [ ] 19.2 实现备用求解器切换逻辑 (1d)
- [ ] 19.3 策略切换测试 (1d)

#### pybind11 Python 绑定 (4d)
- [ ] 20.1 设置 Python 绑定构建环境 (0.5d)
- [ ] 20.2 实现核心类的 Python 绑定 (2d)
- [ ] 20.3 实现求解器的 Python 接口 (1d)
- [ ] 20.4 Python 绑定测试 (0.5d)

#### NumPy/SciPy 互操作 (2d)
- [ ] 21.1 实现 NumPy 数组转换 (1d)
- [ ] 21.2 实现 SciPy 稀疏矩阵转换 (1d)

#### Jupyter notebook 示例 (1d)
- [ ] 22.1 创建基础使用示例 (0.5d)
- [ ] 22.2 创建高级特性示例 (0.5d)

### 交付
- `math::solve()` 自动求解接口
- Python `pymath` 包（PyPI 可装）
- 5 个 Jupyter notebook

---

## Phase 4: 文档 + 发布 (Week 8)

### 目标
完善文档，公开发布 v2.0。

### 任务
#### API 参考文档（Doxygen） (2d)
- [ ] 23.1 配置 Doxygen 生成工具 (0.5d)
- [ ] 23.2 补充代码注释 (1d)
- [ ] 23.3 生成并部署文档 (0.5d)

#### 用户手册 (2d)
- [ ] 24.1 编写安装指南 (0.5d)
- [ ] 24.2 编写基本使用教程 (1d)
- [ ] 24.3 编写常见问题解答 (0.5d)

#### 开发者指南 (1d)
- [ ] 25.1 编写构建说明 (0.5d)
- [ ] 25.2 编写贡献指南 (0.5d)

#### 性能调优指南 (1d)
- [ ] 26.1 性能分析方法 (0.5d)
- [ ] 26.2 调优建议 (0.5d)

#### 10 个应用示例 (2d)
- [ ] 27.1 创建物理仿真示例 (0.5d)
- [ ] 27.2 创建工程计算示例 (0.5d)
- [ ] 27.3 创建其他领域示例 (1d)

#### CI/CD 配置 (1d)
- [ ] 28.1 配置自动化构建 (0.5d)
- [ ] 28.2 配置自动化测试 (0.5d)

#### 包管理配置（Conan/vcpkg） (1d)
- [ ] 29.1 创建 Conan 配置 (0.5d)
- [ ] 29.2 创建 vcpkg 配置 (0.5d)

### 交付
- 完整文档站点
- 10 个领域应用示例
- 自动化 CI/CD 流水线

---

## Phase 5: 高级特性 (可选, Week 9-12)

根据用户反馈和资源情况，按需启动：

#### GPU 加速（CUDA/HIP） (2 周)
- [ ] 30.1 设计 GPU 算法架构 (2d)
- [ ] 30.2 实现 CUDA SpMV (3d)
- [ ] 30.3 实现 CUDA 求解器 (4d)
- [ ] 30.4 HIP 移植 (2d)
- [ ] 30.5 GPU 版本测试 (3d)

#### MPI 分布式求解 (2 周)
- [ ] 31.1 集成 MPI 库 (2d)
- [ ] 31.2 实现分布式矩阵存储 (3d)
- [ ] 31.3 实现分布式求解器 (4d)
- [ ] 31.4 分布式版本测试 (3d)

#### 块稀疏矩阵（BSR） (1 周)
- [ ] 32.1 实现 BSR 矩阵格式 (2d)
- [ ] 32.2 集成 BSR 到求解器 (2d)
- [ ] 32.3 BSR 性能测试 (1d)

#### 非线性求解器（Newton-Krylov） (2 周)
- [ ] 33.1 实现 Jacobian-free Newton-Krylov (4d)
- [ ] 33.2 集成非线性求解器框架 (3d)
- [ ] 33.3 非线性求解器测试 (3d)

#### 时间步进框架（ODE/DAE） (3 周)
- [ ] 34.1 设计时间积分器接口 (2d)
- [ ] 34.2 实现多种时间步进方法 (6d)
- [ ] 34.3 集成刚性ODE求解 (6d)
- [ ] 34.4 时间步进框架测试 (4d)

#### Julia/MATLAB 绑定 (1 周)
- [ ] 35.1 实现 MATLAB mex 接口 (3d)
- [ ] 35.2 实现 Julia 接口 (2d)
- [ ] 35.3 语言绑定测试 (2d)

---

## 里程碑检查点

- **Week 2**: ✓ 求解器族完成，benchmark 数据可用
- **Week 5**: ✓ 并行版本性能达标
- **Week 7**: ✓ Python 包可用，自动求解可用
- **Week 8**: 🚀 **v2.0 正式发布**

---

## 快速链接

- [详细开发计划](DEVELOPMENT_PLAN.md)
- [架构设计文档](docs/architecture.md) *(待创建)*
- [贡献指南](CONTRIBUTING.md) *(待创建)*
- [性能基准](benchmarks/README.md) *(待创建)*

---

**进度跟踪**：
- 总任务：64 项
- 已完成：0 项 (0%)
- 进行中：0 项
- 待开始：64 项

**最后更新**：2026-02-02
